<ion-header>
  <ion-toolbar>
    <ion-title>{{'TITOLO_PRENOTAZIONI' | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!--
  <ion-list>
    <ion-item-sliding *ngFor="let prenotazione of prenotazioni$ | async" #sliding>
      <ion-item>
        <ion-label>
          <h2><strong>{{prenotazione.ristorante.nome}}</strong></h2> <p>-{{prenotazione.scontoApplicato}}%&nbsp;</p>
          <ion-badge margin-end margin-top margin-bottom color="primary" *ngFor="let cate of prenotazione.ristorante.categorie">{{cate.nome}}</ion-badge>
          <p><strong>Giorno:</strong> {{prenotazione.giorno | date: 'EE d MMM, y': '+120'}}</p>
          <p><strong>Orario:</strong> {{prenotazione.orario}}</p>
          <p><strong>Effettuata il:</strong> {{prenotazione.prenotazioneId.timestamp | date: 'EE d MMM, y, hh:mm'}}</p>

          <br>
          <ion-row>

            <ion-icon size="normal" name="people"></ion-icon>
            <div>&nbsp;&nbsp;{{prenotazione.posti}}</div>
          </ion-row> <br>
        </ion-label>
      </ion-item>
      <ion-item-options side="end">
        <ion-item-option color="tertiary" (click)="deletePrenotazioni(sliding)">
          <ion-icon slot="icon-only" name="create"></ion-icon>
        </ion-item-option>
        <ion-item-option color="secondary" (click)="deletePrenotazioni(sliding)">
          <ion-icon slot="icon-only" name="trash"></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
  -->

  <ion-label *ngIf="!loaded">
    <ion-spinner name="crescent"></ion-spinner>
  </ion-label>

  <ion-list>

    <ion-card *ngFor="let prenotazione of prenotazioni">

      <ion-card-title class="ion-margin-top">
        <ion-row>
          <ion-col>
           <ion-label class="ion-margin">
              {{prenotazione.ristorante.nome}}
           </ion-label>
          </ion-col>
          <ion-col>
            <ion-label class="ion-float-right" color="tertiary"><ion-icon name="md-pricetag"></ion-icon>
              -{{prenotazione.scontoApplicato}}%&nbsp;
            </ion-label>
          </ion-col>
        </ion-row>
      </ion-card-title>
      <ion-card-content>
        <ion-row>
          <ion-col size="8">
        <ion-chip style="margin-left: -5px; margin-top: 6px" outline color="primary">
          <ion-icon name="people"></ion-icon>
          <ion-label>{{prenotazione.posti}} {{'LABEL_PERSONE' | translate}}</ion-label>
        </ion-chip>
        <br>
        <ion-label class="ion-margin-top" style="display: flex">
          <ion-icon name="calendar" style="font-size: 18px; margin-right: 6px"></ion-icon> {{prenotazione.giorno | date: 'EE d MMM, y': '+120' : lng | uppercase}}
        </ion-label> <br>
        <ion-label style="display: flex; margin-top: -12px">
          <ion-icon name="time" style="font-size: 18px; margin-right: 6px"></ion-icon> {{prenotazione.orario}}
        </ion-label> <br>
        <ion-card-subtitle>
        <ion-label style="font-style: italic">
          <strong>{{'LABEL_EFFETTUATA' | translate}}:</strong> {{prenotazione.prenotazioneId.timestamp | date: 'EE d MMM, y': '' : lng}}
        </ion-label>
        </ion-card-subtitle>
        </ion-col>
          <ion-col size="4" style="padding-top: 15px">
            <div class="wrapper">
              <ul class="StepProgress">
                <li class="StepProgress-item is-done"><strong>Booking</strong></li>

                <li *ngIf="currentDate < prenotazione.giorno" class="StepProgress-item current"><strong>Complete</strong></li>
                <li *ngIf="currentDate > prenotazione.giorno" class="StepProgress-item is-done"><strong>Complete</strong></li>

                <li *ngIf="currentDate > prenotazione.giorno && !prenotazione.valutata" class="StepProgress-item current"><strong>Review</strong></li>
                <li *ngIf="currentDate > prenotazione.giorno && prenotazione.valutata" class="StepProgress-item is-done"><strong>Review</strong></li>
                <li *ngIf="currentDate < prenotazione.giorno" class="StepProgress-item"><strong>Review</strong></li>
              </ul>
            </div>
          </ion-col>
        </ion-row>



        <!-- <ion-card-subtitle class="ion-margin-top">
        <ion-label> <ion-icon style="font-size: larger" name="people"></ion-icon>
          {{prenotazione.posti}} {{'LABEL_PERSONE' | translate}}
        </ion-label>
        </ion-card-subtitle> -->

        <ion-row>

          <ion-col text-center *ngIf="currentDate > prenotazione.giorno && !prenotazione.valutata">
            <ion-button class="button1" style="margin-top: 12px"
                        [routerLink]="['recensione', prenotazione.ristorante.id, prenotazione.prenotazioneId.timestamp]"
                        routerDirection="forward">
              <ion-label>
                {{'BOTTONE_RECENSIONE' | translate}}
              </ion-label>
            </ion-button>
          </ion-col>
          <ion-col text-center *ngIf="currentDate < prenotazione.giorno">
            <ion-button class="button1" style="margin-top: 12px"
                        (click)="deleteAlert(prenotazione.ristorante.id, prenotazione.prenotazioneId.timestamp)">
              <ion-label>
                {{'BOTTONE_ANNULLA_PRENOTAZIONE' | translate}}
              </ion-label>
            </ion-button>
          </ion-col>
        </ion-row>




      </ion-card-content>
    </ion-card>
  </ion-list>

  <div *ngIf="prenotazioni != null && prenotazioni.length < 1" class="ion-padding ion-text-center ion-margin">
    <ion-label color="medium">
      {{'PRENOTAZIONI_VUOTO' | translate}}
    </ion-label>
  </div>
</ion-content>
